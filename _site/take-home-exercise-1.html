<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Christiana Lim">

<title>Data Analytics - Take-Home Exercise 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data Analytics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-va-take-home-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">VA Take-Home Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-va-take-home-exercises">    
        <li>
    <a class="dropdown-item" href="./take-home-exercise-1.html" rel="" target="">
 <span class="dropdown-text">Take Home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Take Home Exercises/Take-home-Exercise-2.html" rel="" target="">
 <span class="dropdown-text">Take Home Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Take Home Exercises/Take-home-Exercise-3.html" rel="" target="">
 <span class="dropdown-text">Take Home Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Take Home Exercises/Take-home-Exercise-4.html" rel="" target="">
 <span class="dropdown-text">Take Home Exercise 4</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-va-hands-on-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">VA Hands On Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-va-hands-on-exercises">    
        <li>
    <a class="dropdown-item" href="./Hands-On-Exercise/Hands_On_Exercise_3.html" rel="" target="">
 <span class="dropdown-text">Hands On Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Hands-On-Exercise/Hands_On_Exercise_4.html" rel="" target="">
 <span class="dropdown-text">Hands On Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Hands-On-Exercise/Hands_On_Exercise_5.html" rel="" target="">
 <span class="dropdown-text">Hands On Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-va-in-class-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">VA In Class Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-va-in-class-exercises">    
        <li>
    <a class="dropdown-item" href="./Hands-On-Exercise/In-class-ex-2.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./In-Class-Exercise/In-Class-Ex-03.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./In-Class-Exercise/In-Class-Ex-04.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./In-Class-Exercise/In-Class-Ex-06.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./In-Class-Exercise/In-Class-Ex-07.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./In-Class-Exercise/In-Class-Ex-08.html" rel="" target="">
 <span class="dropdown-text">In Class Exercise 8</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#step-by-step-method" id="toc-step-by-step-method" class="nav-link active" data-scroll-target="#step-by-step-method"><strong>1. Step-by-step Method</strong></a>
  <ul class="collapse">
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a></li>
  <li><a href="#creating-the-age-gender-pyramid-in-a-trellis-view" id="toc-creating-the-age-gender-pyramid-in-a-trellis-view" class="nav-link" data-scroll-target="#creating-the-age-gender-pyramid-in-a-trellis-view">Creating the Age-Gender Pyramid in a Trellis View</a></li>
  </ul></li>
  <li><a href="#observations-from-the-dashboard" id="toc-observations-from-the-dashboard" class="nav-link" data-scroll-target="#observations-from-the-dashboard">2. Observations from the Dashboard</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-Home Exercise 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Christiana Lim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Task Objective:</p>
<ol type="1">
<li><p>To display the demographic structure of Singapore at the Planning Area Level by using the age-sex pyramid method that is on a single view (Trellis display)</p></li>
<li><p>9 Planning areas are to be selected.</p></li>
</ol>
<p>Data Source:</p>
<ul>
<li>The dataset used for this task is called ‘Singapore Residents by Planning Area/Subzone, Age Group, Sex and Type of Dwelling, June 2022’, for which the CSV version was downloaded from the Department of Statistics, Singapore website.</li>
</ul>
<p>Basis of selection for the 9 Planning areas:</p>
<ul>
<li><p>From initial observation from the dataset, there are several areas that have low population or 0 population. By cross-refering to Singapore’s latest <a href="https://www.singstat.gov.sg/-/media/files/publications/population/population2019-map1.pdf">Map of Planning Areas/Subzones in Singapore</a> it is observed that areas like ‘Boon Lay’ contain districts like ‘Tukang’, ‘Liu Fang’ etc which are not residential zones.</p></li>
<li><p>Hence, for effective comparison, planning areas with intuitively denser/popular residential zones were selected.</p></li>
</ul>
<section id="step-by-step-method" class="level1">
<h1><strong>1. Step-by-step Method</strong></h1>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data Preparation</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 46%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">No.</th>
<th>Description of Step</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td><p><strong>Load data file</strong></p>
<ul>
<li><p>Connect a new data source to Tableau by loading the csv file ‘CSVrespopagesextod2022’ into Tableau prep builders.</p></li>
<li><p>After loading the file, the preview of the data would show up according to figure right.</p></li>
</ul>
<p>The following columns should be view-able with the corresponding definitions:</p>
<ul>
<li><p>PA : Planning Area, SZ: Subzone, AG: Age group range, Sex, TOD: Type of Development, Pop: Population figure, Time: 2022</p>
<p>*Since slice of data was taken for June 2022, ‘Time’ column will display the same value throughout the dataset.</p></li>
</ul></td>
<td style="text-align: center;"><img src="images/Step1.PNG" class="img-fluid" style="width:132.3cm" alt="Figure 1"></td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td><p><strong>Data treatment (‘Sex’ column)</strong></p>
<ul>
<li><p>Since Males and Females are in the same column, create 2 new columns to clearly identify population numbers for females and males separately.</p></li>
<li><p>Right-click the column ‘Sex’ and locate the command ‘Create Calculated Field’</p></li>
<li><p>Create a new column named ‘Male’ with the following calculation inserted: see Figure 3. This will identify a new column for populations numbers of Males only.</p></li>
<li><p>Repeat the same calculation to create a second column named ‘Female’</p></li>
<li><p>At the end of this step, you should have 2 new calculated columns created that should look like Figure 5.</p></li>
</ul></td>
<td style="text-align: center;"><img src="images/Create_calculated_field_command.PNG" class="img-fluid" width="500" alt="Figure 2">
<p><img src="images/male_calculation.PNG" class="img-fluid"></p>
<p><img src="images/Female_calculation.PNG" class="img-fluid" width="386"></p>
<p><img src="images/2newcolumnscreated.PNG" class="img-fluid" width="135"></p></td>
</tr>
</tbody>
</table>
</section>
<section id="creating-the-age-gender-pyramid-in-a-trellis-view" class="level2">
<h2 class="anchored" data-anchor-id="creating-the-age-gender-pyramid-in-a-trellis-view">Creating the Age-Gender Pyramid in a Trellis View</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 46%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">No.</th>
<th>Description of Step</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td><ul>
<li><p>Open up a new sheet &amp; rename it to ‘Age-Gender Pyramid Trellis’</p></li>
<li><p>Drag the variables ‘PA’ to Columns and ‘AG’ to Rows respectively to produce a table that displays all the 55 PA as column headers and age groups as rows</p></li>
</ul></td>
<td style="text-align: center;"><img src="images/Add_PAandAG.PNG" class="img-fluid"></td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td><ul>
<li><p>Add the data that is to be displayed</p></li>
<li><p>Drag the calculated columns ‘Male’ and ‘Female’ to Columns respectively. The Sums of populations for both Male and Female are reported immediately in the form of a bar chart.</p></li>
<li><p>Since ‘Male’ and ‘Female’ population breakdown is reported correspondingly for each Planning area (see example on the right for Ang Mo Kio)</p></li>
</ul></td>
<td style="text-align: center;"><p><img src="images/Drag_male_female.PNG" class="img-fluid"></p>
<p><img src="images/Intiial_AMK.PNG" class="img-fluid" width="263"></p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td><p>Selection of 9 Planning Areas to display</p>
<ul>
<li><p>To limit the 9 areas to display, drag ‘PA’ to the Filters box</p></li>
<li><p>Select the following 9 Planning Areas in the list to report. As the pre-selection has been set to report all the Planning Areas, click ‘None’ first to de-select all options before selecting the 9.</p>
<ul>
<li><p>Ang Mo Kio</p></li>
<li><p>Bukit Merah</p></li>
<li><p>Bukit Timah</p></li>
<li><p>Hougang</p></li>
<li><p>Jurong East</p></li>
<li><p>Kallang</p></li>
<li><p>Pasir Ris</p></li>
<li><p>Sengkang</p></li>
</ul></li>
<li><p>The result should show only the 9 selected planning areas as shown on the right.</p></li>
</ul></td>
<td style="text-align: center;"><p><img src="images/PA_tofilter.PNG" class="img-fluid"></p>
<p><img src="images/Filter_PA.PNG" class="img-fluid" width="261"></p>
<p><img src="images/9 Planning areas.PNG" class="img-fluid"></p></td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td><p>Formatting of the Trellis Chart (Color)</p>
<ul>
<li><p>Create color distinction between ‘Male’ and ‘Female’ populations by doing the following:</p>
<ul>
<li>Under the Marks section, navigate to SUM(Male) and change the color of the marks to green. Repeat this step for SUM(Female) to change the color of the marks to pink.</li>
</ul></li>
</ul></td>
<td style="text-align: center;"><p><img src="images/Male_Color.PNG" class="img-fluid" width="177"></p>
<p><img src="images/changedColor_MaleandFemale.PNG" class="img-fluid"></p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td><p>Formatting of the Trellis Chart (sort AG axis)</p>
<ul>
<li>Sort the y-axis to report the Age groups in descending order. Right-click the AG axis and sort in descending order</li>
</ul></td>
<td style="text-align: center;"><img src="images/Sort_descending.PNG" class="img-fluid" width="237"></td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td><p>Formatting of the Trellis Chart (Pyramid effect)</p>
<ul>
<li><p>To create the pyramid effect, we have the reverse the x-axis of ‘Male’</p></li>
<li><p>Right-click ‘Male’ at the x-axis and click ‘Edit Axis’. Under ‘Scale’, select the ‘Reversed’ option.</p></li>
<li><p>The final result should cause the pyramid effect (see example for Bukit Merah)</p></li>
</ul></td>
<td style="text-align: center;"><p><img src="images/Reverse_Males.PNG" class="img-fluid"></p>
<p><img src="images/Pyramid_effect.PNG" class="img-fluid"></p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td><p>Formatting of the Trellis Chart (Enhance visualization)</p>
<ul>
<li><p>Click ‘Fit Height’ above the column shelf to re-size the trellis chart to fit the height of the dashboard</p></li>
<li><p>Hide row &amp; column header field because the title would already cover this</p></li>
<li><p>Rename the Title accordingly to ‘SG Population Age- Gender distribution over 9 Planning Areas (June 2022)’</p></li>
<li><p>Under ‘Format Lines’ click none under ‘Grid Lines’ for a cleaner look</p></li>
<li><p>Format and change the size of the PA Font to 14 , in boldface by right-clicking ‘Format’ of PA and making the changes in the Default panel</p></li>
<li><p>Likewise, do the same for the Age-group y-axis by changing the Default font to size 12 and boldface</p></li>
</ul></td>
<td style="text-align: center;"><p><img src="images/Fit_height.PNG" class="img-fluid"></p>
<p><img src="images/Hide_label.PNG" class="img-fluid"></p>
<p><img src="images/Hide_label_2.PNG" class="img-fluid"></p>
<p><img src="images/Gridlines_format.PNG" class="img-fluid"></p>
<p><img src="images/FormatPAFont.PNG" class="img-fluid"></p></td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td><p>Adding labels to the diagrams</p>
<ul>
<li><p>Assuming target audience of the dashboard is on a working level and requires level of detail to each label, add labels for both ‘Male’ and ‘Female’ by dragging both variables to Marks as a Label</p></li>
<li><p>Adjust the color of the font as necessary with format and you should be able to get the figure on the right (example for Bukit Timah)</p></li>
</ul></td>
<td style="text-align: center;"><img src="images/AddingLabels.PNG" class="img-fluid"></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="observations-from-the-dashboard" class="level1">
<h1>2. Observations from the Dashboard</h1>
<p>The following trends were observed after plotting the anecdotal more popular residential areas in Singapore.</p>
<p>In general, the most dense area was found to be Sengkang while the least populated zones were Bukit Timah and Hougang. In terms of Male and Female distribution, it was observed that the differences are not noticeable greater over the other in general but totals of Females were generally higher than Males across all 9 planning areas.</p>
<p><u><em>Sengkang, an upcoming area for young families</em></u></p>
<p>This area was found to have more than 10K average of the general age range from 35 to 49 years old, which supports the hypothesis that many young families are drawn to live in Sengkang. Correspondingly, the number of young children in the age range of 0 to 19 is also significantly higher compare to the other 8 areas.</p>
<p><u><em>Hougang as an unexpectedly more mature estate than Ang-Mo Kio and Toa Payoh ?</em></u></p>
<p>While both Ang Mo Kio and Toa Payoh are generally referred to as mature estates the less publicized area of Hougang showed that it had a significantly larger number of older generation residents in the age range of 55 to 74. While the caveat here could be due to Hougang having a larger land size in comparison to Ang Mo Kio and Toa Payoh, a theory behind this could also be due to the lesser amount of development works in Hougang that could have reduced population shifts (or households moving), resulting in many of these older generation to continue staying within the neighborhood.</p>
<p><u><em>Bukit Timah as a richer residential area</em></u></p>
<p>The data also shows clearly how Bukit Timah has one of the lower populations compared to the rest of the planning areas. This is also not a surprise given that this area is known to be home to a large proportion of landed properties and low-lying areas, which are larger in size compared to HDBs and is hence less densely populated than other areas.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>